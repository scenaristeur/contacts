{"version":3,"sources":["webpack:///./src/components/axios/AxiosPost.vue?7c51","webpack:///src/components/axios/AxiosPost.vue","webpack:///./src/components/axios/AxiosPost.vue?39cf","webpack:///./src/components/axios/AxiosPost.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","models","model","value","post","meta","callback","$$v","$set","expression","data","on","post_action","_v","staticRenderFns","name","selected","as","schema","methods","computed","ldp_server","storage","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,YAAc,mCAAmC,MAAQ,OAAO,YAAY,SAAS,CAACF,EAAG,gBAAgB,CAACE,MAAM,CAAC,QAAUN,EAAIO,OAAO,SAAWP,EAAIO,OAAO,IAAIC,MAAM,CAACC,MAAOT,EAAIU,KAAKC,KAAS,KAAEC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIU,KAAKC,KAAM,OAAQE,IAAME,WAAW,qBAAqB,GAAGX,EAAG,eAAe,CAACE,MAAM,CAAC,YAAc,kCAAkC,MAAQ,OAAO,YAAY,SAAS,CAACF,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,OAAO,YAAc,0BAA0BE,MAAM,CAACC,MAAOT,EAAIU,KAAKM,KAAK,eAAgBJ,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIU,KAAKM,KAAM,cAAeH,IAAME,WAAW,+BAA+B,GAAGX,EAAG,WAAW,CAACa,GAAG,CAAC,MAAQjB,EAAIkB,cAAc,CAAClB,EAAImB,GAAG,WAAW,IAC3zBC,EAAkB,G,8GCwCtB,eAGA,GACEC,KAAM,YACNL,KAFF,WAGI,MAAO,CACLM,SAAU,GACVZ,KAAM,CACJM,KAAM,CACJ,WACV,CACYO,GAAI,wCACJC,OAAQ,sBAEV,cAAe,mBACf,QAAS,IAEXb,KAAM,MAWZc,QAAS,CACP,YADJ,WACA,uKACA,oBACA,2DACA,2CACA,yCACA,WACA,wBACA,cAEA,uBAEA,gBAXA,iBAYA,qDACA,CACA,SACA,0BACA,mCAEA,cACA,mCAEA,kBACA,eACA,iCACA,uBAEA,qCA1BA,yCA6BA,mLACA,eACA,yBA/BA,UAgCA,iFACA,kBAEA,gEAnCA,QAqCA,uBArCA,sDAwCA,YAxCA,+DAwEEC,SAAU,OAAZ,OAAY,CAAZ,CACIC,WAAY,SAAhB,kCACIpB,OAAQ,SAAZ,8BACIqB,QAAS,SAAb,8BClJkW,I,YCO9VC,EAAY,eACd,EACA9B,EACAqB,GACA,EACA,KACA,KACA,MAIa,aAAAS,E","file":"js/chunk-2d0a386e.87117cb9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-form-group',{attrs:{\"description\":\"Select the type of the Resource.\",\"label\":\"Type\",\"label-for\":\"type\"}},[_c('b-form-select',{attrs:{\"options\":_vm.models,\"selected\":_vm.models[0]},model:{value:(_vm.post.meta.type),callback:function ($$v) {_vm.$set(_vm.post.meta, \"type\", $$v)},expression:\"post.meta.type\"}})],1),_c('b-form-group',{attrs:{\"description\":\"Enter the name of the Resource.\",\"label\":\"Name\",\"label-for\":\"name\"}},[_c('b-input',{attrs:{\"id\":\"name\",\"placeholder\":\"name, ex: 'Bobby Cool'\"},model:{value:(_vm.post.data['schema:name']),callback:function ($$v) {_vm.$set(_vm.post.data, 'schema:name', $$v)},expression:\"post.data['schema:name']\"}})],1),_c('b-button',{on:{\"click\":_vm.post_action}},[_vm._v(\"Post\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n\r\n\r\n    <!--\r\n    <b-form-group\r\n    id=\"fieldset-1\"\r\n    description=\"In which container ?\"\r\n    label=\"Path\"\r\n    label-for=\"path\"\r\n    >\r\n    <b-input id=\"path\" v-model=\"post.path\" placeholder=\"path, ex: persons \"/>\r\n  </b-form-group> -->\r\n\r\n  <b-form-group\r\n  description=\"Select the type of the Resource.\"\r\n  label=\"Type\"\r\n  label-for=\"type\"\r\n  >\r\n  <b-form-select v-model=\"post.meta.type\" :options=\"models\" :selected=\"models[0]\" ></b-form-select>\r\n  <!-- <b-input id=\"type\" v-model=\"post.data.type\" placeholder=\"type, ex: Person \"/> -->\r\n</b-form-group>\r\n\r\n<b-form-group\r\ndescription=\"Enter the name of the Resource.\"\r\nlabel=\"Name\"\r\nlabel-for=\"name\"\r\n>\r\n<b-input id=\"name\" v-model=\"post.data['schema:name']\" placeholder=\"name, ex: 'Bobby Cool'\" />\r\n</b-form-group>\r\n\r\n\r\n<b-button @click=\"post_action\">Post</b-button>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n//import axios from 'axios';\r\nimport { mapState } from 'vuex';\r\nimport auth from 'solid-auth-client';\r\nimport FC from 'solid-file-client'\r\nconst fc = new FC( auth )\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport default {\r\n  name: 'AxiosPost',\r\n  data() {\r\n    return {\r\n      selected: {},\r\n      post: {\r\n        data: {\r\n          \"@context\":\r\n          {\r\n            as: \"https://www.w3.org/ns/activitystreams\",\r\n            schema: \"http://schema.org/\"\r\n          },\r\n          \"schema:name\": \"Guillaume Cousin\",\r\n          '@type': \"\"\r\n        },\r\n        meta: {}\r\n      },\r\n      //       {\r\n      //   \"@context\": \"https://json-ld.org/contexts/person.jsonld\",\r\n      //   \"@id\": \"http://dbpedia.org/resource/John_Lennon\",\r\n      //   \"name\": \"John Lennon\",\r\n      //   \"born\": \"1940-10-09\",\r\n      //   \"spouse\": \"http://dbpedia.org/resource/Cynthia_Lennon\"\r\n      // }\r\n    };\r\n  },\r\n  methods: {\r\n    async  post_action() {\r\n      console.log(this.post)\r\n      this.post.data['schema:dateCreated'] = new Date().toISOString()\r\n      this.post.data['@type'] = this.post.meta.type.type\r\n      console.log(JSON.stringify(this.post.data))\r\n      let store = this.$store\r\n      let container = this.post.meta.type.path\r\n      let post_data = this.post.data\r\n\r\n      console.log(this.storage)\r\n\r\n      if (this.storage == null){\r\n        fetch(this.ldp_server.url+'/'+this.post.meta.type.path+'/',\r\n        {\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          },\r\n          method: \"POST\",\r\n          body: JSON.stringify(this.post.data)\r\n        })\r\n        .then(function(res){\r\n          console.log(res)\r\n          store.dispatch('ldp_store/update', container)\r\n          post_data['schema:name'] = ''\r\n        })\r\n        .catch(function(res){ console.log(res) })\r\n      }else{\r\n        try{\r\n          let url = this.ldp_server.url.endsWith('/') ? this.ldp_server.url+this.post.meta.type.path+'/'+uuidv4()+'.jsonld' : this.ldp_server.url+'/'+this.post.meta.type.path+'/'+uuidv4()+'.jsonld'\r\n          console.log(url)\r\n          console.log(this.post.data)\r\n          await fc.createFile(url, JSON.stringify(this.post.data), 'application/json' ).then((content) => {\r\n        console.log(content)\r\n    })\r\n    .catch(err => console.error(`Error: ${err}`))\r\n\r\n          alert(url+\" sauvegardÃ©\")\r\n        }\r\n        catch(e){\r\n          alert(e)\r\n        }\r\n      }\r\n\r\n\r\n\r\n      // axios.post(\r\n      //   this.ldp_server.url+'/'+this.post.data.type.path+'/',\r\n      //   this.post.data,\r\n      //   {header: {'Content-Type': 'application/ld+json'}}\r\n      // )\r\n      //  let data =  { '@context': \"https://www.w3.org/ns/activitystreams\", '@type': \"Person\", 'name': \"POL2\"}\r\n\r\n      //   axios.post(this.ldp_server.url+'/'+this.post.data.type.path+'/',\r\n      //   {\r\n      //     '@context': \"https://www.w3.org/ns/activitystreams\", '@type': \"Person\", 'name': \"POL2\"},\r\n      //   {\r\n      //     header: {\r\n      //       'Content-Type': 'application/ld+json',\r\n      //       'Accept': 'application/ld+json'\r\n      //     }\r\n      //   }\r\n      // )\r\n      // .then((response) => {\r\n      //   console.log(response);\r\n      //   //  this.$store.dispatch('ldp_store/update', this.post.data.type.path)\r\n      //   //  console.log(response.headers.get('Location'))\r\n      // }, (error) => {\r\n      //   console.log(error);\r\n      // });\r\n    },\r\n  },\r\n  computed: mapState({\r\n    ldp_server: s =>  s.ldp_store.ldp_server,\r\n    models: s =>  s.ldp_store.models,\r\n    storage: s =>  s.solid.storage\r\n\r\n  }),\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AxiosPost.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AxiosPost.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AxiosPost.vue?vue&type=template&id=613b1002&\"\nimport script from \"./AxiosPost.vue?vue&type=script&lang=js&\"\nexport * from \"./AxiosPost.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}