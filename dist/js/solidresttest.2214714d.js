(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["solidresttest"],{98197:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("h3",[e._v("Solid Rest Test")]),e._v(" result : "+e._s(e.result)+" "),n("b-button",{on:{click:e.create}},[e._v("Create")]),n("b-button",{on:{click:e.read}},[e._v("Read")]),n("hr"),n("div",{staticClass:"todos"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{placeholder:"New Todo"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),n("button",{on:{click:function(t){e.post({message:e.message},{},"todos"),e.message=""}}},[e._v("Save Todo")]),e._l(e.todos,(function(t){return n("div",{key:t.id},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"todo.message"}],domProps:{value:t.message},on:{change:function(n){return e.$pouch.put(t,{},"todos")},input:function(n){n.target.composing||e.$set(t,"message",n.target.value)}}}),e._v(" vcard:name "),n("input",{directives:[{name:"model",rawName:"v-model",value:t["vcard:hasName"],expression:"todo['vcard:hasName']"}],domProps:{value:t["vcard:hasName"]},on:{change:function(n){return e.$pouch.put(t,{},"todos")},input:function(n){n.target.composing||e.$set(t,"vcard:hasName",n.target.value)}}}),n("button",{on:{click:function(n){return e.$pouch.remove(t,{},"todos")}}},[e._v("Remove")])])}))],2)],1)},a=[],o=(n("96cf"),n("1da1")),s=n("11c1"),c=n("00e8"),i=n.n(c),u=n("7fed"),d=n.n(u),l=n("2f62"),p=n("d72f"),f=new SolidRest([new SolidBrowserFS]);console.log(f);var h="app://bfs/IndexedDB",m=h+"/test-file.ttl",v="<> a <#test>.";function g(e,t){return w.apply(this,arguments)}function w(){return w=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("init"),e.next=3,f.fetch(t,{method:"PUT",body:n});case 3:return r=e.sent,e.next=6,f.fetch(t);case 6:if(r=e.sent,e.t0=200==r.status,!e.t0){e.next=14;break}return e.next=11,r.text();case 11:e.t1=e.sent,e.t2=n,e.t0=e.t1==e.t2;case 14:if(!e.t0){e.next=18;break}b("OK!"),e.next=19;break;case 18:b("FAIL!");case 19:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function b(e){console.log("<p>".concat(e,"</p>"))}g(m,v);var x=new d.a(i.a),y={name:"SolidRestTest",data:function(){return{base:"app://bfs/IndexedDB",file:this.base+"/test-file.ttl",text:"<> a <#test>.",result:"must change",contacts_path:"",message:""}},pouch:{todos:{}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("databases",e.$databases),t.next=3,e.$pouch.allDocs({},"todos");case 3:return n=t.sent,console.log("todos",n),t.next=7,e.PUT(m,e.text);case 7:return t.next=9,e.GET(m);case 9:return r=t.sent,t.next=12,r.text();case 12:a=t.sent,console.log(a),e.result=a,e.contacts_path=e.storage+"contacts/",e.$pouch.syncToAnything=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("docs",n),r={},r["@id"]=Object(s["v4"])()+".json",r["schema:dateCreated"]=(new Date).toISOString(),r.message=n.message,console.log(r),console.log(r,e.contacts_path+r["@id"]),t.next=9,x.createFile(e.contacts_path+r["@id"],JSON.stringify(r),"application/json");case 9:return a=t.sent,console.log(a),t.abrupt("return",a);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),console.log(e.$pouch);case 18:case"end":return t.stop()}}),t)})))()},methods:{post:function(e,t,n){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var o,c,i,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o=new p["a"],c=r.storage+"contacts/",null==o["@id"]&&(o["@id"]=c+Object(s["v4"])()+".jsonld"),o["vcard:hasName"]=e.message,console.log("vcard",o),i=Object.assign({},o),i._id=i["@id"],console.log("pouch_card",i),o.save({option_test:"bla",base:"contacts"}),r.$pouch.put(i,t,n),u=r.$pouch.syncToAnything(e),console.log("RESULT",u);case 12:case"end":return a.stop()}}),a)})))()},create:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},n["@id"]=Object(s["v4"])()+".jsonld",n["schema:dateCreated"]=(new Date).toISOString(),console.log(n,e.contacts_path+n["@id"]),t.next=6,e.PUT(e.contacts_path+n["@id"],JSON.stringify(n),"application/json");case 6:r=t.sent,console.log(r);case 8:case"end":return t.stop()}}),t)})))()},read:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GET(e.contacts_path);case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}}),t)})))()},test1:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n='<> a <#test>. \n\n      <> dct:dateCreated "'.concat(new Date,'" .'),t.next=3,e.PUT(m,n);case 3:return t.next=5,e.GET(m);case 5:return r=t.sent,t.next=8,r.text();case 8:a=t.sent,console.log(a),e.result=a;case 11:case"end":return t.stop()}}),t)})))()},GET:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.fetch(e,{method:"GET",headers:{Accept:"application/json"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},HEAD:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.fetch(e,{method:"HEAD"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},PUT:function(e,t){var n=arguments;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=n.length>2&&void 0!==n[2]?n[2]:"text/turtle",console.log("text",t),r.next=4,f.fetch(e,{method:"PUT",body:t,headers:{"content-type":a}});case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r)})))()},DELETE:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.fetch(e,{method:"DELETE"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},POST:function(e,t,n,r){return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f.fetch(e,{method:"POST",headers:{slug:t,link:r,"content-type":"text/turtle"},body:n});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))()},postFile:function(e,t,n){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o='<http://www.w3.org/ns/ldp#Resource>; rel="type"',a.abrupt("return",r.POST(e,t,n,o));case 2:case"end":return a.stop()}}),a)})))()},postFolder:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a='<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',r.abrupt("return",n.POST(e,t,"",a));case 2:case"end":return r.stop()}}),r)})))()}},computed:Object(l["b"])({contacts:function(e){return e.contacts.contacts},storage:function(e){return e.solid.storage}})},j=y,O=n("2877"),k=Object(O["a"])(j,r,a,!1,null,null,null);t["default"]=k.exports},b636:function(e,t,n){var r=n("746f");r("asyncIterator")},c141:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));n("d3b7"),n("3ca3"),n("ddb0");var r=n("5530"),a=(n("96cf"),n("1da1")),o=n("d4ec"),s=n("bee2");n("a4d3"),n("e01a"),n("b636"),n("d28b");function c(e){var t;if("undefined"!==typeof Symbol){if(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator],null!=t))return t.call(e);if(Symbol.iterator&&(t=e[Symbol.iterator],null!=t))return t.call(e)}throw new TypeError("Object is not async iterable")}const i=(e,t)=>t.some(t=>e instanceof t);let u,d;function l(){return u||(u=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p(){return d||(d=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const f=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap,g=new WeakMap;function w(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",o)},a=()=>{t(k(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&f.set(t,e)}).catch(()=>{}),g.set(t,e),t}function b(e){if(h.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",o),e.removeEventListener("abort",o)},a=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",o),e.addEventListener("abort",o)});h.set(e,t)}let x={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return h.get(e);if("objectStoreNames"===t)return e.objectStoreNames||m.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return k(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function y(e){x=e(x)}function j(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?p().includes(e)?function(...t){return e.apply(D(this),t),k(f.get(this))}:function(...t){return k(e.apply(D(this),t))}:function(t,...n){const r=e.call(D(this),t,...n);return m.set(r,t.sort?t.sort():[t]),k(r)}}function O(e){return"function"===typeof e?j(e):(e instanceof IDBTransaction&&b(e),i(e,l())?new Proxy(e,x):e)}function k(e){if(e instanceof IDBRequest)return w(e);if(v.has(e))return v.get(e);const t=O(e);return t!==e&&(v.set(e,t),g.set(t,e)),t}const D=e=>g.get(e);function I(e,t,{blocked:n,upgrade:r,blocking:a,terminated:o}={}){const s=indexedDB.open(e,t),c=k(s);return r&&s.addEventListener("upgradeneeded",e=>{r(k(s.result),e.oldVersion,e.newVersion,k(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),c.then(e=>{o&&e.addEventListener("close",()=>o()),a&&e.addEventListener("versionchange",()=>a())}).catch(()=>{}),c}const R=["get","getKey","getAll","getAllKeys","count"],E=["put","add","delete","clear"],S=new Map;function T(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(S.get(t))return S.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=E.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!a&&!R.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,a?"readwrite":"readonly");let s=o.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),a&&o.done]))[0]};return S.set(t,o),o}y(e=>({...e,get:(t,n,r)=>T(t,n)||e.get(t,n,r),has:(t,n)=>!!T(t,n)||e.has(t,n)}));const B=["continue","continuePrimaryKey","advance"],_={},P=new WeakMap,N=new WeakMap,L={get(e,t){if(!B.includes(t))return e[t];let n=_[t];return n||(n=_[t]=function(...e){P.set(this,N.get(this)[t](...e))}),n}};async function*A(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,L);N.set(n,t),g.set(n,D(t));while(t)yield n,t=await(P.get(n)||t.continue()),P.delete(n)}function C(e,t){return t===Symbol.asyncIterator&&i(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&i(e,[IDBIndex,IDBObjectStore])}y(e=>({...e,get(t,n,r){return C(t,n)?A:e.get(t,n,r)},has(t,n){return C(t,n)||e.has(t,n)}}));var $=function(){function e(){Object(o["a"])(this,e),this.jsonld={"@context":{owl:"http://www.w3.org/2002/07/owl#",as:"https://www.w3.org/ns/activitystreams",schema:"http://schema.org/"},"@id":null,"@type":"owl:Thing","schema:name":"__NEW__THING__"}}return Object(s["a"])(e,[{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("save",this,e),this.demo()}},{key:"demo",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a,o,s,i,u,d,l,p,f,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I("Articles",1,{upgrade:function(e){var t=e.createObjectStore("articles",{keyPath:"@id"});t.createIndex("date","date")}});case 2:return t=e.sent,e.next=5,t.add("articles",{"@id":"boo1",title:"Article 1",date:new Date("2019-01-01"),body:"Article one"});case 5:return n=t.transaction("articles","readwrite"),e.next=8,Promise.all([n.store.add({"@id":"boo2",title:"Article 2",date:new Date("2019-01-01"),body:"deuxieme "}),n.store.add({"@id":"boo3",title:"Article 3",date:new Date("2019-01-02"),body:"et trois"}),n.done]);case 8:return e.t0=console,e.next=11,t.getAllFromIndex("articles","date");case 11:e.t1=e.sent,e.t0.log.call(e.t0,e.t1),a=t.transaction("articles","readwrite"),o=a.store.index("date"),s=!0,i=!1,e.prev=17,d=c(o.iterate(new Date("2019-01-01")));case 19:return e.next=21,d.next();case 21:return l=e.sent,s=l.done,e.next=25,l.value;case 25:if(p=e.sent,s){e.next=34;break}f=p,h=Object(r["a"])({},f.value),h.body+=" And, happy new year!",f.update(h);case 31:s=!0,e.next=19;break;case 34:e.next=40;break;case 36:e.prev=36,e.t2=e["catch"](17),i=!0,u=e.t2;case 40:if(e.prev=40,e.prev=41,s||null==d.return){e.next=45;break}return e.next=45,d.return();case 45:if(e.prev=45,!i){e.next=48;break}throw u;case 48:return e.finish(45);case 49:return e.finish(40);case 50:return e.next=52,a.done;case 52:case"end":return e.stop()}}),e,null,[[17,36,40,50],[41,,45,49]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}()},d72f:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("d4ec"),a=n("257e"),o=n("262e"),s=n("2caf"),c=n("c141"),i={"@id":null,"vcard:hasName":"","@type":"vcard:VCard","vcard:given-name":"","vcard:family-name":"","vcard:hasPhoto":"https://image.flaticon.com/icons/svg/149/149992.svg"},u=function(e){Object(o["a"])(n,e);var t=Object(s["a"])(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return Object(r["a"])(this,n),e=t.call(this),Object.assign(Object(a["a"])(e),o),e}return n}(c["a"])}}]);
//# sourceMappingURL=solidresttest.2214714d.js.map