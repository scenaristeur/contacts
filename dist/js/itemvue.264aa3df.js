(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["itemvue"],{"9d71":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e._v(" ItemVue "+e._s(e.item)+" "),o("b-card-group",{attrs:{deck:""}},[o("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{"img-src":"https://picsum.photos/600/300/?image=25","img-alt":"Image","img-top":"",tag:"article"}},[o("b-card-title",[o("EditableSpan",{model:{value:e.item["schema:name"],callback:function(t){e.$set(e.item,"schema:name",t)},expression:"item['schema:name']"}})],1),o("b-card-sub-title",[e._v(" @type: "+e._s(e.item["@type"])+", @id: "+e._s(e.item["@id"])),o("br"),e._v(" created: "+e._s(e.item["schema:dateCreated"])+" ")]),o("b-card-text",[e._v(" Some quick example text to build on the card title and make up the bulk of the card's content. ")]),o("b-button",{attrs:{href:"#",variant:"primary"}},[e._v("Update")])],1),o("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{tag:"article"}},[o("b-card-title",[e._v("Properties "),o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.addPropModal",modifiers:{addPropModal:!0}}],attrs:{variant:"primary"}},[e._v("+")])],1),o("b-card-sub-title"),o("b-card-text",[e._v(" Some quick example text to build on the card title and make up the bulk of the card's content. ")]),o("b-button",{attrs:{href:"#",variant:"primary"}},[e._v("Update")])],1)],1),o("b-modal",{attrs:{id:"addPropModal"},on:{ok:e.addProp},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v(" Add a property to "+e._s(e.item["schema:name"])+" ")]},proxy:!0}])},[o("b-form-group",{attrs:{description:"Enter a predicate.",label:"Predicate","label-for":"predicate"}},[o("b-input",{attrs:{id:"predicate",placeholder:"predicate"},model:{value:e.item_new.meta.predicate,callback:function(t){e.$set(e.item_new.meta,"predicate",t)},expression:"item_new.meta.predicate"}})],1),o("b-form-group",{attrs:{description:"Set a simple STRING value.",label:"Value","label-for":"value"}},[o("b-input",{attrs:{id:"value",placeholder:"value"},on:{click:e.setValueFormat},model:{value:e.item_new.meta.value,callback:function(t){e.$set(e.item_new.meta,"value",t)},expression:"item_new.meta.value"}})],1),e._v(" or "),o("b-form-group",{attrs:{description:"Choose the type of a Resource.",label:"Type","label-for":"type"}},[o("b-form-select",{attrs:{options:e.models,selected:e.models[0]},on:{change:e.typeChanged},model:{value:e.item_new.meta.type,callback:function(t){e.$set(e.item_new.meta,"type",t)},expression:"item_new.meta.type"}})],1),e._v(" "+e._s(e.format)+" "),null!=e.choice?o("b-alert",{attrs:{show:""}},[e._v(" "+e._s(e.choice["schema:name"])+" ")]):o("b-alert",{attrs:{show:""}},[e._v(" "+e._s(e.item_new.meta.value)+" ")])],1),o("b-modal",{attrs:{id:"modal-choose","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v(" Create or choose a "+e._s(e.item_new.meta.type.name)+" ")]},proxy:!0}])},[o("NewThing",{attrs:{type:e.item_new.meta.type},on:{itemCreated:e.objectSelected}}),o("b-list-group",e._l(e.donnees,(function(t){return o("b-list-group-item",{key:t["@id"],attrs:{button:""},on:{click:function(o){return e.objectSelected(t)}}},[e._v(" "+e._s(t["schema:name"])),o("br"),o("small",[e._v(e._s(t["@id"]))])])})),1),o("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:function(t){return e.$bvModal.hide("modal-choose")}}},[e._v("Close Me")])],1)],1)},a=[],s=(o("d3b7"),o("2f62")),n={name:"ItemVue",components:{EditableSpan:function(){return o.e("chunk-2d0b6714").then(o.bind(null,"1cd0"))},NewThing:function(){return o.e("chunk-e9106412").then(o.bind(null,"cbb8"))}},data:function(){return{item:{},format:"value",selected:{},item_new:{data:{"@context":{as:"https://www.w3.org/ns/activitystreams",schema:"http://schema.org/"},"schema:name":"Guillaume Cousin","@type":""},meta:{}},donnees:[],choice:null}},created:function(){this.init(this.$route.params),console.log("todo: catch url query.url",this.$route.query.url)},methods:{init:function(e){console.log(e),this.item=e.item},objectSelected:function(e){console.log("object",e),this.choice=e,this.$bvModal.hide("modal-choose")},addProp:function(){console.log("add to",this.item["@id"],this.item);var e=this.item_new.meta.predicate;if(console.log(e),console.log(this.choice["@id"]),console.log(this.item[e]),void 0==this.item[e]&&(this.item[e]=[]),"value"==this.format?this.item[e].push(this.item_new.meta.value):this.item[e].push(this.choice["@id"]),console.log("ITEM",this.item),fetch(this.item["@id"],{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(this.item)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),"value"!=this.format){console.log(e),console.log(this.choice["@id"]),console.log(this.item[e]),void 0==this.item[e]&&(this.item[e]=[]),"value"==this.format?this.item[e].push(this.item_new.meta.value):this.item[e].push(this.choice["@id"]),console.log("ITEM",this.item);var t=e+"_reverse";void 0==this.choice[t]&&(this.choice[t]=[]),this.choice[t].push(this.item["@id"]),fetch(this.choice["@id"],{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(this.choice)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},typeChanged:function(e){console.log("type",e),this.format="type",console.log(this.app[e.path]),this.donnees=this.app[e.path],this.$bvModal.show("modal-choose")},setValueFormat:function(){this.format="value",this.choice=null,this.selected=null}},watch:{$route:function(e){this.init(e.params)}},computed:Object(s["b"])({models:function(e){return e.ldp_store.models},app:function(e){return e.ldp_store.app}})},c=n,l=o("2877"),r=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=r.exports}}]);
//# sourceMappingURL=itemvue.264aa3df.js.map