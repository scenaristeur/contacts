{"version":3,"sources":["webpack:///./src/components/axios/AxiosPost.vue?df3d","webpack:///src/components/axios/AxiosPost.vue","webpack:///./src/components/axios/AxiosPost.vue?16cd","webpack:///./src/components/axios/AxiosPost.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","models","model","value","post","meta","callback","$$v","$set","expression","data","on","post_action","_v","staticRenderFns","name","selected","as","schema","methods","computed","ldp_server","storage","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,YAAc,mCAAmC,MAAQ,OAAO,YAAY,SAAS,CAACF,EAAG,gBAAgB,CAACE,MAAM,CAAC,QAAUN,EAAIO,OAAO,SAAWP,EAAIO,OAAO,IAAIC,MAAM,CAACC,MAAOT,EAAIU,KAAKC,KAAS,KAAEC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIU,KAAKC,KAAM,OAAQE,IAAME,WAAW,qBAAqB,GAAGX,EAAG,eAAe,CAACE,MAAM,CAAC,YAAc,kCAAkC,MAAQ,OAAO,YAAY,SAAS,CAACF,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,OAAO,YAAc,0BAA0BE,MAAM,CAACC,MAAOT,EAAIU,KAAKM,KAAK,eAAgBJ,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIU,KAAKM,KAAM,cAAeH,IAAME,WAAW,+BAA+B,GAAGX,EAAG,WAAW,CAACa,GAAG,CAAC,MAAQjB,EAAIkB,cAAc,CAAClB,EAAImB,GAAG,WAAW,IAC3zBC,EAAkB,G,8GCwCtB,eAGA,GACEC,KAAM,YACNL,KAFF,WAGI,MAAO,CACLM,SAAU,GACVZ,KAAM,CACJM,KAAM,CACJ,WACV,CACYO,GAAI,wCACJC,OAAQ,sBAEV,cAAe,mBACf,QAAS,IAEXb,KAAM,MAWZc,QAAS,CACP,YADJ,WACA,uKACA,oBACA,2DACA,2CACA,yCACA,WACA,wBACA,cAEA,uBAEA,gBAXA,iBAYA,qDACA,CACA,SACA,0BACA,mCAEA,cACA,mCAEA,kBACA,eACA,iCACA,uBAEA,qCA1BA,yCA6BA,mLACA,eACA,yBA/BA,UAgCA,iFACA,kBAEA,gEAnCA,QAqCA,uBArCA,sDAwCA,YAxCA,+DAwEEC,SAAU,OAAZ,OAAY,CAAZ,CACIC,WAAY,SAAhB,kCACIpB,OAAQ,SAAZ,8BACIqB,QAAS,SAAb,8BClJkW,I,YCO9VC,EAAY,eACd,EACA9B,EACAqB,GACA,EACA,KACA,KACA,MAIa,aAAAS,E","file":"js/chunk-2d0a386e.2781e1bf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-form-group',{attrs:{\"description\":\"Select the type of the Resource.\",\"label\":\"Type\",\"label-for\":\"type\"}},[_c('b-form-select',{attrs:{\"options\":_vm.models,\"selected\":_vm.models[0]},model:{value:(_vm.post.meta.type),callback:function ($$v) {_vm.$set(_vm.post.meta, \"type\", $$v)},expression:\"post.meta.type\"}})],1),_c('b-form-group',{attrs:{\"description\":\"Enter the name of the Resource.\",\"label\":\"Name\",\"label-for\":\"name\"}},[_c('b-input',{attrs:{\"id\":\"name\",\"placeholder\":\"name, ex: 'Bobby Cool'\"},model:{value:(_vm.post.data['schema:name']),callback:function ($$v) {_vm.$set(_vm.post.data, 'schema:name', $$v)},expression:\"post.data['schema:name']\"}})],1),_c('b-button',{on:{\"click\":_vm.post_action}},[_vm._v(\"Post\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n\n\n    <!--\n    <b-form-group\n    id=\"fieldset-1\"\n    description=\"In which container ?\"\n    label=\"Path\"\n    label-for=\"path\"\n    >\n    <b-input id=\"path\" v-model=\"post.path\" placeholder=\"path, ex: persons \"/>\n  </b-form-group> -->\n\n  <b-form-group\n  description=\"Select the type of the Resource.\"\n  label=\"Type\"\n  label-for=\"type\"\n  >\n  <b-form-select v-model=\"post.meta.type\" :options=\"models\" :selected=\"models[0]\" ></b-form-select>\n  <!-- <b-input id=\"type\" v-model=\"post.data.type\" placeholder=\"type, ex: Person \"/> -->\n</b-form-group>\n\n<b-form-group\ndescription=\"Enter the name of the Resource.\"\nlabel=\"Name\"\nlabel-for=\"name\"\n>\n<b-input id=\"name\" v-model=\"post.data['schema:name']\" placeholder=\"name, ex: 'Bobby Cool'\" />\n</b-form-group>\n\n\n<b-button @click=\"post_action\">Post</b-button>\n</div>\n</template>\n\n<script>\n//import axios from 'axios';\nimport { mapState } from 'vuex';\nimport auth from 'solid-auth-client';\nimport FC from 'solid-file-client'\nconst fc = new FC( auth )\nimport { v4 as uuidv4 } from 'uuid';\n\nexport default {\n  name: 'AxiosPost',\n  data() {\n    return {\n      selected: {},\n      post: {\n        data: {\n          \"@context\":\n          {\n            as: \"https://www.w3.org/ns/activitystreams\",\n            schema: \"http://schema.org/\"\n          },\n          \"schema:name\": \"Guillaume Cousin\",\n          '@type': \"\"\n        },\n        meta: {}\n      },\n      //       {\n      //   \"@context\": \"https://json-ld.org/contexts/person.jsonld\",\n      //   \"@id\": \"http://dbpedia.org/resource/John_Lennon\",\n      //   \"name\": \"John Lennon\",\n      //   \"born\": \"1940-10-09\",\n      //   \"spouse\": \"http://dbpedia.org/resource/Cynthia_Lennon\"\n      // }\n    };\n  },\n  methods: {\n    async  post_action() {\n      console.log(this.post)\n      this.post.data['schema:dateCreated'] = new Date().toISOString()\n      this.post.data['@type'] = this.post.meta.type.type\n      console.log(JSON.stringify(this.post.data))\n      let store = this.$store\n      let container = this.post.meta.type.path\n      let post_data = this.post.data\n\n      console.log(this.storage)\n\n      if (this.storage == null){\n        fetch(this.ldp_server.url+'/'+this.post.meta.type.path+'/',\n        {\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          method: \"POST\",\n          body: JSON.stringify(this.post.data)\n        })\n        .then(function(res){\n          console.log(res)\n          store.dispatch('ldp_store/update', container)\n          post_data['schema:name'] = ''\n        })\n        .catch(function(res){ console.log(res) })\n      }else{\n        try{\n          let url = this.ldp_server.url.endsWith('/') ? this.ldp_server.url+this.post.meta.type.path+'/'+uuidv4()+'.jsonld' : this.ldp_server.url+'/'+this.post.meta.type.path+'/'+uuidv4()+'.jsonld'\n          console.log(url)\n          console.log(this.post.data)\n          await fc.createFile(url, JSON.stringify(this.post.data), 'application/json' ).then((content) => {\n        console.log(content)\n    })\n    .catch(err => console.error(`Error: ${err}`))\n\n          alert(url+\" sauvegardÃ©\")\n        }\n        catch(e){\n          alert(e)\n        }\n      }\n\n\n\n      // axios.post(\n      //   this.ldp_server.url+'/'+this.post.data.type.path+'/',\n      //   this.post.data,\n      //   {header: {'Content-Type': 'application/ld+json'}}\n      // )\n      //  let data =  { '@context': \"https://www.w3.org/ns/activitystreams\", '@type': \"Person\", 'name': \"POL2\"}\n\n      //   axios.post(this.ldp_server.url+'/'+this.post.data.type.path+'/',\n      //   {\n      //     '@context': \"https://www.w3.org/ns/activitystreams\", '@type': \"Person\", 'name': \"POL2\"},\n      //   {\n      //     header: {\n      //       'Content-Type': 'application/ld+json',\n      //       'Accept': 'application/ld+json'\n      //     }\n      //   }\n      // )\n      // .then((response) => {\n      //   console.log(response);\n      //   //  this.$store.dispatch('ldp_store/update', this.post.data.type.path)\n      //   //  console.log(response.headers.get('Location'))\n      // }, (error) => {\n      //   console.log(error);\n      // });\n    },\n  },\n  computed: mapState({\n    ldp_server: s =>  s.ldp_store.ldp_server,\n    models: s =>  s.ldp_store.models,\n    storage: s =>  s.solid.storage\n\n  }),\n\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AxiosPost.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AxiosPost.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AxiosPost.vue?vue&type=template&id=613b1002&\"\nimport script from \"./AxiosPost.vue?vue&type=script&lang=js&\"\nexport * from \"./AxiosPost.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}